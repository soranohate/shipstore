This page was last modified on `$= dv.current().file.mtime.toFormat("yyyy-MM-dd HH:MM:ss")`


<%*
let url = 'https://www.tianqi.com/beijing/' 
let res = await request({url: url,method: "GET"}); 
res = res.replace(/\n/g,'')
let nl = /<dd class="week">(.*?)<\/dd>/. exec (res) 
let 农历 = nl[1]
-%>
  
<% 农历 %>


<%*
// 将文件移动到/Daily/目录下，并命名为titleName
await tp.file.move("/日记/" + titleName)
// 运行后光标到运行后文件中
tp.file.cursor()
-%>


<%+ tp.file.last_modified_date("YYYY-MM-DD_HH:mm:ss") %>


<%* 
let weatherUrl = 'https://restapi.amap.com/v3/weather/weatherInfo'
let key = '484f04340b78342c1d9c3d40d76f631d'

let ipUrl = 'https://restapi.amap.com/v3/ip';

let ipResult = JSON.parse(await request({url: ipUrl + '?key=' + key, method: "GET"}))
console.log("ipResult: ", ipResult)

let adcode = ipResult.adcode
console.log("adcode: " + adcode)

let 位置 = ''
let 天气 = ''
let 温度 = ''
let 风向 = ''
await fetch(weatherUrl + `?key=${key}&city=${adcode}&extensions=all`)
.then(res => res.json())
.then((data) => {
	let info = data.forecasts[0]
	
	console.log("info:" + info)
	
	位置 = info.province + '-' + info.city
	天气 = '🌅' + info.casts[0].dayweather + ' / 🌃' + info.casts[0].nightweather
	温度 = '🌅' + info.casts[0].daytemp_float + '℃' + '/ 🌃' + info.casts[0].nighttemp_float + '℃'
})
-%> 



🌍位置🌍: <% 位置 %> 
☁️天气☁️: <% 天气 %> 
🌡️温度🌡️: <% 温度 %>



<%*
let url = 'https://www.tianqi.com/jiujiang/' 
let res = await request({url: url,method: "GET"}); res = res.replace(/\n/g,'') 
let dqwd = /<p class="now"><b>(\d+)<\/b><i>℃<\/i><\/p>/.exec(res) 
let tqwdfw = /<span><b>(.*?)<\/b>(.*?)<\/span>/.exec(res) 
let sdfxzwx = /<dd class="shidu"><b>(.*?)<\/b><b>(.*?)<\/b><b>(.*?)<\/b><\/dd>/.exec(res) 
let kqzlrcrl = /<dd class="kongqi" ><h5 style="background-color:#[0-9a-z]{6};">(.*?)<\/h5><h6>(.*?)<\/h6><span>(.*?)<br \/>(.*?)<\/span><\/dd>/.exec(res) 
let 当前温度 = '当前温度：' + dqwd[1]+'℃' 
let 天气 = '天气：' + tqwdfw[1] 
let 温度范围 = '温度范围：' + tqwdfw[2] 
let 湿度 = sdfxzwx[1] 
let 风向 = sdfxzwx[2] 
let 紫外线 = sdfxzwx[3] 
let 空气质量 = kqzlrcrl[1] + ' ' + kqzlrcrl[2] 
let 日出日落 = kqzlrcrl[3] + ' ' +kqzlrcrl[4] 
-%> 
<% 当前温度 %> 
<% 天气 %> 
<% 温度范围 %>
<% 湿度 %> 
<% 风向 %> 
<% 紫外线 %> 
<% 空气质量 %> 
<% 日出日落 %>





<%*
// 高德天气API，需要高德Key 
let ipUrl = 'https://restapi.amap.com/v3/ip'; 
let weatherUrl = 'https://restapi.amap.com/v3/weather/weatherInfo' 
let key = '484f04340b78342c1d9c3d40d76f631d';

// 腾讯IP定位，需要腾讯Key 
let tencentIpUrl = 'https://apis.map.qq.com/ws/location/v1/ip'; 
let tencentKey = 'LIMBZ-53DCH-GZXDD-WD3LP-7FKEK-XDF4F'; 

let adcode = eval("(" + await request({url: tencentIpUrl + `?key=${tencentKey}`, method: "GET"}) + ")").result.ad_info.adcode 

console.log("adcode: " + adcode) 

let 位置 = '' 
let 天气 = '' 
let 温度 = '' 
let 风向 = '' 
await fetch(weatherUrl + `?key=${key}&city=${adcode}&extensions=all`) 
.then(res => res.json()) 
.then((data) => { 
	let info = data.forecasts[0] 
	
	console.log("info:" + info) 
	
	位置 = info.province + '-' + info.city 
	天气 = '🌅' + info.casts[0].dayweather + ' / 🌃' + info.casts[0].nightweather 
	温度 = '🌅' + info.casts[0].daytemp_float + '℃' + '/ 🌃' + info.casts[0].nighttemp_float + '℃' 
})
-%> 


🌍位置🌍 :: <% 位置 %> 
☁️天气☁️ :: <% 天气 %> 
🌡️温度🌡️ :: <% 温度 %>