This page was last modified on `$= dv.current().file.mtime.toFormat("yyyy-MM-dd HH:MM:ss")`


<%*
let url = 'https://www.tianqi.com/beijing/' 
let res = await request({url: url,method: "GET"}); 
res = res.replace(/\n/g,'')
let nl = /<dd class="week">(.*?)<\/dd>/. exec (res) 
let å†œå† = nl[1]
-%>
  
<% å†œå† %>


<%*
// å°†æ–‡ä»¶ç§»åŠ¨åˆ°/Daily/ç›®å½•ä¸‹ï¼Œå¹¶å‘½åä¸ºtitleName
await tp.file.move("/æ—¥è®°/" + titleName)
// è¿è¡Œåå…‰æ ‡åˆ°è¿è¡Œåæ–‡ä»¶ä¸­
tp.file.cursor()
-%>


<%+ tp.file.last_modified_date("YYYY-MM-DD_HH:mm:ss") %>


<%* 
let weatherUrl = 'https://restapi.amap.com/v3/weather/weatherInfo'
let key = '484f04340b78342c1d9c3d40d76f631d'

let ipUrl = 'https://restapi.amap.com/v3/ip';

let ipResult = JSON.parse(await request({url: ipUrl + '?key=' + key, method: "GET"}))
console.log("ipResult: ", ipResult)

let adcode = ipResult.adcode
console.log("adcode: " + adcode)

let ä½ç½® = ''
let å¤©æ°” = ''
let æ¸©åº¦ = ''
let é£å‘ = ''
await fetch(weatherUrl + `?key=${key}&city=${adcode}&extensions=all`)
.then(res => res.json())
.then((data) => {
	let info = data.forecasts[0]
	
	console.log("info:" + info)
	
	ä½ç½® = info.province + '-' + info.city
	å¤©æ°” = 'ğŸŒ…' + info.casts[0].dayweather + ' / ğŸŒƒ' + info.casts[0].nightweather
	æ¸©åº¦ = 'ğŸŒ…' + info.casts[0].daytemp_float + 'â„ƒ' + '/ ğŸŒƒ' + info.casts[0].nighttemp_float + 'â„ƒ'
})
-%> 



ğŸŒä½ç½®ğŸŒ: <% ä½ç½® %> 
â˜ï¸å¤©æ°”â˜ï¸: <% å¤©æ°” %> 
ğŸŒ¡ï¸æ¸©åº¦ğŸŒ¡ï¸: <% æ¸©åº¦ %>



<%*
let url = 'https://www.tianqi.com/jiujiang/' 
let res = await request({url: url,method: "GET"}); res = res.replace(/\n/g,'') 
let dqwd = /<p class="now"><b>(\d+)<\/b><i>â„ƒ<\/i><\/p>/.exec(res) 
let tqwdfw = /<span><b>(.*?)<\/b>(.*?)<\/span>/.exec(res) 
let sdfxzwx = /<dd class="shidu"><b>(.*?)<\/b><b>(.*?)<\/b><b>(.*?)<\/b><\/dd>/.exec(res) 
let kqzlrcrl = /<dd class="kongqi" ><h5 style="background-color:#[0-9a-z]{6};">(.*?)<\/h5><h6>(.*?)<\/h6><span>(.*?)<br \/>(.*?)<\/span><\/dd>/.exec(res) 
let å½“å‰æ¸©åº¦ = 'å½“å‰æ¸©åº¦ï¼š' + dqwd[1]+'â„ƒ' 
let å¤©æ°” = 'å¤©æ°”ï¼š' + tqwdfw[1] 
let æ¸©åº¦èŒƒå›´ = 'æ¸©åº¦èŒƒå›´ï¼š' + tqwdfw[2] 
let æ¹¿åº¦ = sdfxzwx[1] 
let é£å‘ = sdfxzwx[2] 
let ç´«å¤–çº¿ = sdfxzwx[3] 
let ç©ºæ°”è´¨é‡ = kqzlrcrl[1] + ' ' + kqzlrcrl[2] 
let æ—¥å‡ºæ—¥è½ = kqzlrcrl[3] + ' ' +kqzlrcrl[4] 
-%> 
<% å½“å‰æ¸©åº¦ %> 
<% å¤©æ°” %> 
<% æ¸©åº¦èŒƒå›´ %>
<% æ¹¿åº¦ %> 
<% é£å‘ %> 
<% ç´«å¤–çº¿ %> 
<% ç©ºæ°”è´¨é‡ %> 
<% æ—¥å‡ºæ—¥è½ %>





<%*
// é«˜å¾·å¤©æ°”APIï¼Œéœ€è¦é«˜å¾·Key 
let ipUrl = 'https://restapi.amap.com/v3/ip'; 
let weatherUrl = 'https://restapi.amap.com/v3/weather/weatherInfo' 
let key = '484f04340b78342c1d9c3d40d76f631d';

// è…¾è®¯IPå®šä½ï¼Œéœ€è¦è…¾è®¯Key 
let tencentIpUrl = 'https://apis.map.qq.com/ws/location/v1/ip'; 
let tencentKey = 'LIMBZ-53DCH-GZXDD-WD3LP-7FKEK-XDF4F'; 

let adcode = eval("(" + await request({url: tencentIpUrl + `?key=${tencentKey}`, method: "GET"}) + ")").result.ad_info.adcode 

console.log("adcode: " + adcode) 

let ä½ç½® = '' 
let å¤©æ°” = '' 
let æ¸©åº¦ = '' 
let é£å‘ = '' 
await fetch(weatherUrl + `?key=${key}&city=${adcode}&extensions=all`) 
.then(res => res.json()) 
.then((data) => { 
	let info = data.forecasts[0] 
	
	console.log("info:" + info) 
	
	ä½ç½® = info.province + '-' + info.city 
	å¤©æ°” = 'ğŸŒ…' + info.casts[0].dayweather + ' / ğŸŒƒ' + info.casts[0].nightweather 
	æ¸©åº¦ = 'ğŸŒ…' + info.casts[0].daytemp_float + 'â„ƒ' + '/ ğŸŒƒ' + info.casts[0].nighttemp_float + 'â„ƒ' 
})
-%> 


ğŸŒä½ç½®ğŸŒ :: <% ä½ç½® %> 
â˜ï¸å¤©æ°”â˜ï¸ :: <% å¤©æ°” %> 
ğŸŒ¡ï¸æ¸©åº¦ğŸŒ¡ï¸ :: <% æ¸©åº¦ %>